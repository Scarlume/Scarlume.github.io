---
import '../styles/global.css';
import BaseLayout from '../layouts/BaseLayout.astro';
import BlogPost from '../components/BlogPost.astro';

const allPosts = Object.values(import.meta.glob('./posts/*.md', { eager: true }));
const sortedPosts = allPosts.sort((a: any, b: any) => 
  new Date(b.frontmatter.pubDate).valueOf() - new Date(a.frontmatter.pubDate).valueOf()
);
---

<BaseLayout pageTitle="博客文章">
  <div class="blog-intro">
    <p>这里记录了我的技术思考、学习笔记和生活感悟。</p>
  </div>
  
  <div class="blog-posts">
    {sortedPosts.map((post: any) => 
      <BlogPost 
        url={post.url} 
        title={post.frontmatter.title}
        description={post.frontmatter.description}
        pubDate={post.frontmatter.pubDate}
        tags={post.frontmatter.tags}
      />
    )}
  </div>
  
  {sortedPosts.length === 0 && (
    <div class="empty-state">
      <p>还没有发布任何文章，敬请期待！</p>
    </div>
  )}
</BaseLayout>

<style>
  .blog-intro {
    text-align: center;
    margin-bottom: 3rem;
  }
  
  .blog-intro p {
    font-size: 1.1rem;
    color: #6b7280;
    max-width: 600px;
    margin: 0 auto;
  }
  
  .blog-posts {
    max-width: 800px;
    margin: 0 auto;
  }
  
  .empty-state {
    text-align: center;
    padding: 4rem 2rem;
    color: #9ca3af;
  }
  
  :global(html.dark) .blog-intro p {
    color: #cbd5e1;
  }
  
  :global(html.dark) .empty-state {
    color: #6b7280;
  }
</style>